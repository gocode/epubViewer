<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/iron-pages/iron-pages.html">
<link rel="import" href="bower_components/paper-toolbar/paper-toolbar.html">

<link rel="import" href="file-upload.html">
<link rel="import" href="settings-dialog.html">
<link rel="import" href="epub-viewer.html">

<dom-module id="epub-reader">

	<style>
		epub-viewer {
			height: 100%;
	    	width: 100%;
		}

		paper-toolbar {
			text-align: center;
		}
	</style>

	<template>
		<paper-toolbar>
			<div class="title">Epub Reader</div>
			<paper-button on-click="openSettingsDialog">
				<paper-icon-button icon="settings"></paper-icon-button>
			</paper-button>
		</paper-toolbar>

		<iron-pages id="pages" selected="0">
			<file-upload></file-upload>
			<epub-viewer></epub-viewer>
		</iron-pages>

		<settings-dialog id="dialog">
		</settings-dialog>
	</template>

	<script>
		Polymer({
			is: "epub-reader",

/*			ready: function() {
				window.addEventListener("pushstate", function(e) {
					console.log('adfasdfasd');
    				if(document.location.pathname.startsWith("/epubviewer")) {
						this.$.pages.selected = 1;
					}
				});
			},*/

			openSettingsDialog: function() {
				this.$.dialog.open();
			}
		});
	</script>

</dom-module>